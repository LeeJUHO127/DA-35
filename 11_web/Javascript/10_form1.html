<!-- form1.html -->
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    
    </head>
    <body>
        <div class="container mt-3">
            <!-- form: 입력양식들을 묶어주는 역할. 
            default: action="" method="get" -->
            <form name="f1">
                <label for="id" class="'form-label">ID:</label>
                <span style="color: red" id="id_error"></span>
                <input type="text" name="id" id="id" required class="form-control" placeholder="아이디"/>
                <label for="pwd" class="form-label">패스워드:</label>
                <input type="password" name="password" id="pwd" class="form-control" required />

                <div class="btn-group mt-1">
                    <input type="button" onclick="sendForm(1)" value="등록" class="btn btn-primary" />
                    <input type="button" onclick="sendForm(2)" value="수정" class="btn btn-primary" />
                </div>
            </form>
        </div>
        <script>
            function sendForm(flag) {
                //flag: 1 - 등록, 2 - 수정 ==> url을 변경.
                // form 객체(DOM)조회
                f1 = window.document.f1
                if (flag===1) {
                    f1.action = "/add"
                } else {
                    f1.action = "/update"
                }
                //요청방식 변경(default: GET -> POST)
                f1.method = "post";

                // 입력 폼이 잘 입력되었는지 체크.
                // id, passwd 모두 6글자 이상일 경우 전송되도록 처리.
                //// 입력폼 element객체 조회-> form객체.input_name속성값
                idElem = f1.id  // <input  name="id" ..>  조회
                idValue = idElem.value  // 입력 값을 조회. value속성.
                passwdValue = f1.password.value
                // <input ... name="password" value="?????">
                // console.log(idElem, idValue);
                
                document.getElementById("id_error").innerText =""
                if (idValue.length < 6) {  // 문자열.length -글자수 확인
                    // alert("ID는 6글자 이상 입력하세요.");
                    // id로 element를 조회 한 후에 content(내용)을 입력
                    document.getElementById("id_error").innerText = "ID는 6글자 이상 입력하세요."
                    f1.id.focus(); // 태그객체.focus() 
                    return;
                }
                if (passwdValue.length < 6) {
                    alert("Password는 6글자 이상 입력하세요.")
                    f1.password.focus();
                    return;
                }


                // action url로 전송
                f1.submit();
                // f1.reset(); // 초기화
            }

        </script>
    </body>
</html>
